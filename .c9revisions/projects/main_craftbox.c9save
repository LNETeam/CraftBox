{"ts":1369511589946,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"--Developed by LNETeam from LNET Technologies\n\npID = os.getComputerID()\nserver = {}\n\n--Loads necessary APIs\nos.loadAPI(\"api_craftbox\") --Default APIs\nos.loadAPI(\"cn_craftbox\") --Rednet APIs\n\ncn_craftbox.openRednet()\n\nfunction resetCol()\n\tterm.setTextColor(colors.white)\nend\n\nfunction requestServer()\n\tserverID, serverName = cn_craftbox.requestBroadcast(\"server_socket\",3) --edit timing for server response time\n\tif not serverID then\n\t\treturn false\n\telse\n\t\treturn serverID,serverName\n\tend\nend\n\nfunction startup()\n\tsID,sName = requestServer()\n\tif sID ~= false then\n\t\tserver.propsID = sID\n\t\tserver.propsName = sName\n\telse\n\t\terror(\"\")\n\tend\n\tterm.clear()\n\tterm.setCursorPos(1,1)\n\tterm.write(\"Contacting nearest server...\")\n\tx,y = term.getCursorPos()\n\tzWait = 1\n\trepeat\n\t\tterm.setCursorPos(x,y)\n\t\tapi_craftbox.spool()\n\t\tp1,p2 = rednet.receive(.0001)\n\t\tif p2 == \"auth\" then\n\t\t\tbreak\n\t\tend\n\t\tzWait = zWait+1\n\t\tsleep(.0001)\n\tuntil zWait == 10 --Adjust timing here!\n\tif zWait == 10 then --This is equal to the above line\n\t\tterm.setCursorPos(x,y)\n\t\tterm.setTextColor(colors.red)\n\t\tterm.write(\" Failed to contact nearest server!\")\n\t\treset()\n\t\tterm.setCursorPos(1,2)\n\t\tfor i=0,189 do\n\t\t\ttextutils.slowWrite(\".\",2000)\n\t\tend\n\t\tterm.clear()\n\t\tterm.setCursorPos(1,1)\n\t\tshell.run(\"shell\")\n\telse\n\t\tterm.setCursorPos(x,y)\n\t\tterm.setTextColor(colors.green)\n\t\tterm.write(\"Successfully connected to: \"..server.propsName..\",\"..server.propsID..\"!\")\n\t\tresetCol()\n\tend\n\n\t--Aestetics\n\tClient={}\n\tClient.id = pID\n\tClient.name = shell.getRunningProgram()\n\tClient.time = os.time()\n\tClient.isModemOpen = true\n\tterm.write(\"\\n\"..Client.id..\" is attached to server\")\n\tsleep(.5)\n\tterm.write(\"\\n\"..Client.name..\": Currently running on Client\")\n\tsleep(.5)\n\tterm.write(\"\\n\"..Client.time..\": Current world time of connect\")\n\tsleep(.5)\n\tterm.write(\"\\nStatus of modem: \"..Client.isModemOpen)\n\tsleep(.5)\n\ttextutils.slowWrite(\"Starting Client GUI...\", 15)\n\n\t--Passes program handling to 'login_craftbox' class\n\tapi_craftbox.pass(\"login_craftbox\",server.propsID,server.propsName)\nend\n\nrunning = false\nstartup()"]],"start1":0,"start2":0,"length1":0,"length2":2065}]],"length":2065}
