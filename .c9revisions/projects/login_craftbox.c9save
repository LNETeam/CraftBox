{"ts":1369510704674,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"os.loadAPI(\"api_craftbox\")--customary API loading\nos.loadAPI(\"cn_craftbox\")--rednet handling\nos.loadAPI(\"gui_craftbox\")--gui handling\nos.loadAPI(\"security_craftbox\")--block-handling and general security\n\nsecurity_craftbox.block(os.getComputerID())\nsession_storage={}\n\nlogo = [[\n\n\t\t$     $   $  $$$$ $$$$$\n\t\t$     $$  $  $      $\n\t\t$     $ $ $  $$$$   $\n\t\t$\t  $  $$  $      $\n\t\t$$$$$ $   $  $$$$   $\n]]\n\n--import server objects\n\nsArgs={...}\n\nif sArgs[2]~=\"no\" then\n\tct=0\n\tlogged_in = false\nend\n\n--Initial\nwhile true do\n\tterm.clear()\n\tterm.setCursorPos(1,6)\n\tif ct ~=0 then\n\t\tprint(\"Attempts: \"..ct..\"/5\")\n\tend\n\tterm.setCursorPos(1,1)\n\tprint(\"  Login  \")\n\tprint(\"---------\")\n\n\t--Get user input\n\tusr = gui_craftbox.genUsr(\"Username: \")--puts a usr gui for the user to login to\n\tpass = gui_craftbox.genPass(\"Password: \")--puts a pass gui for the user to login to\n\n\testX = string.len(usr..\"Username: \")+1--gets the length of what they entered and username for the conditional 'cerror' below\n\ty = gui_craftbox.getPrevCmd(\"y\")-2\n\n\t--Authentication takes place\n\tif not cn_craftbox.authenticate(usr,pass) then \n\t\tapi_craftbox.cerror(\" **Incorrect username/password!**\",estX,y)\n\t\tnope = security_craftbox.tryCount(ct)\n\t\tif nope==false then\n\t\t\tbreak\n\t\tend\n\t\tct=ct+1\n\t\tsleep(4) \n\t\tshell.run(shell.getRunningProgram(),textutils.serialize(sArgs),\"no\")\n\telse --checks credentials against servers\n\t\tlogged_in=true\n\t\tsession_storage.user=usr\n\t\tsession_storage.passw=pass\n\t\tbreak\n\tend\nend\n\nif nope==false then\n\tlocal x,y = term.getCursorPos()\n\tapi_craftbox.cerror(\"**Sorry you have maxed out your trys right now**\",1,8)\n\tsleep(5)\n\tsecurity_craftbox.block(os.getComputerID(),true)\n\tterm.clear()\n\tterm.setCursorPos(1,1)\n\tshell.run(\"shell\")\nend\n\nif logged_in then\n\tapi_craftbox.pass(\"home_craftbox\",session_storage,sArgs)\nend"]],"start1":0,"start2":0,"length1":0,"length2":1804}]],"length":1804}
